<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="阳光夜风"><title>LeetCode "295. Find Median from Data Stream" · 阳光夜风</title><!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="description" content="LeetCode link
Intuition
Using two heaps, maxHeap and minHeap, ensure the size of max always not smaller the min, so the median is the max peek(when ma"><meta name="keywords" content="iOS, Apple Foundation, Machine Learning, Algorithm, LeetCode"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">阳光夜风</a></h3><div class="description"><p>上善若水 大盈若冲</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/1685261185"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/categories/">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>LeetCode &quot;295. Find Median from Data Stream&quot;</a></h3></div><div class="post-content"><p><a href="https://leetcode.com/problems/find-median-from-data-stream/description/" target="_blank" rel="external">LeetCode link</a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h3 id="Intuition"><a href="#Intuition" class="headerlink" title="Intuition"></a>Intuition</h3><ul>
<li>Using two heaps, maxHeap and minHeap, ensure the size of max always not smaller the min, so the median is the max peek(when max is one more than min) or the middle of max peek and min peek(when the sizes of them are equal).</li>
</ul>
<p><strong>solution</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">class MedianFinder &#123;</div><div class="line"></div><div class="line">    PriorityQueue&lt;Integer&gt; minHeap;</div><div class="line">    PriorityQueue&lt;Integer&gt; maxHeap;</div><div class="line"></div><div class="line">    /** initialize your data structure here. */</div><div class="line">    public MedianFinder() &#123;</div><div class="line">        minHeap = new PriorityQueue&lt;&gt;();</div><div class="line">        maxHeap = new PriorityQueue&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void addNum(int num) &#123;</div><div class="line">        if (maxHeap.isEmpty()) &#123;</div><div class="line">            maxHeap.add(-num);</div><div class="line">        &#125; else &#123;</div><div class="line">            if (num &lt;= -maxHeap.peek()) &#123;</div><div class="line">                maxHeap.add(-num);</div><div class="line">                if (maxHeap.size() &gt; minHeap.size() + 1) &#123;</div><div class="line">                    minHeap.add(-maxHeap.poll());</div><div class="line">                &#125;</div><div class="line">            &#125; else &#123;</div><div class="line">                if (maxHeap.size() &gt; minHeap.size()) &#123;</div><div class="line">                    minHeap.add(num);</div><div class="line">                &#125; else &#123;</div><div class="line">                    minHeap.add(num);</div><div class="line">                    maxHeap.add(-minHeap.poll());</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public double findMedian() &#123;</div><div class="line">        if (maxHeap.size() == minHeap.size()) &#123;</div><div class="line">            return (double)(minHeap.peek() - maxHeap.peek()) / 2.0;</div><div class="line">        &#125;</div><div class="line">        return -maxHeap.peek();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>promote</strong></p>
<p>The code can be simplify.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">class MedianFinder &#123;</div><div class="line"></div><div class="line">    PriorityQueue&lt;Integer&gt; minHeap;</div><div class="line">    PriorityQueue&lt;Integer&gt; maxHeap;</div><div class="line"></div><div class="line">    /** initialize your data structure here. */</div><div class="line">    public MedianFinder() &#123;</div><div class="line">        minHeap = new PriorityQueue&lt;&gt;();</div><div class="line">        maxHeap = new PriorityQueue&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void addNum(int num) &#123;</div><div class="line">        minHeap.add(num);</div><div class="line">        maxHeap.add(-minHeap.poll());</div><div class="line">        if (maxHeap.size() &gt; minHeap.size() + 1) &#123;</div><div class="line">            minHeap.add(-maxHeap.poll());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public double findMedian() &#123;</div><div class="line">        if (maxHeap.size() == minHeap.size()) &#123;</div><div class="line">            return (double)(minHeap.peek() - maxHeap.peek()) / 2.0;</div><div class="line">        &#125;</div><div class="line">        return -maxHeap.peek();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-09-04</span><i class="fa fa-comment-o"></i><a href="/posts/295-Find-Median-from-Data-Stream/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/categories/算法/" title="算法">算法 </a><a class="tag" href="/tags/算法/" title="算法">算法 </a><a class="tag" href="/tags/algorithm/" title="algorithm">algorithm </a><a class="tag" href="/tags/LeetCode/" title="LeetCode">LeetCode </a><a class="tag" href="/tags/Heap/" title="Heap">Heap </a><a class="tag" href="/tags/堆/" title="堆">堆 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://yhvh009.github.io/posts/295-Find-Median-from-Data-Stream/,阳光夜风,LeetCode &quot;295. Find Median from Data Stream&quot;,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/posts/332-Reconstruct-Itinerary/" title="LeetCode &quot;332. Reconstruct Itinerary&quot;">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/posts/215-Kth-Largest-Element-in-an-Array/" title="LeetCode &quot;215. Kth Largest Element in an Array&quot;">下一篇</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'yhvh009-github-io';
var disqus_identifier = 'posts/295-Find-Median-from-Data-Stream/';
var disqus_title = 'LeetCode &quot;295. Find Median from Data Stream&quot;';
var disqus_url = 'https://yhvh009.github.io/posts/295-Find-Median-from-Data-Stream/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>