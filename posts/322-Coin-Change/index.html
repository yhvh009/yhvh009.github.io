<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="阳光夜风"><title>LeetCode "322. Coin Change" · 阳光夜风</title><!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="description" content="LeetCode link
first thought
sort the input array
check from biggest to smallest
pick current coin from most to none

solution
123456789101112131415161"><meta name="keywords" content="iOS, Apple Foundation, Machine Learning, Algorithm, LeetCode"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">阳光夜风</a></h3><div class="description"><p>上善若水 大盈若冲</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/1685261185"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/categories/">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>LeetCode &quot;322. Coin Change&quot;</a></h3></div><div class="post-content"><p><a href="https://leetcode.com/problems/coin-change/description/" target="_blank" rel="external">LeetCode link</a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h3 id="first-thought"><a href="#first-thought" class="headerlink" title="first thought"></a>first thought</h3><ul>
<li>sort the input array</li>
<li>check from biggest to smallest</li>
<li>pick current coin from most to none</li>
</ul>
<p><strong>solution</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">public class Solution &#123;</div><div class="line"></div><div class="line">    int min;</div><div class="line"></div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        Arrays.sort(coins);</div><div class="line">        this.min = -1;</div><div class="line">        if (coins.length &gt; 0) &#123;</div><div class="line">            this.helper(coins, amount, coins.length - 1, 0);</div><div class="line">        &#125;</div><div class="line">        return this.min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void helper(int[] coins, int amount, int index, int count) &#123;</div><div class="line">        if (index &lt; 0) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if (amount == coins[index]) &#123;</div><div class="line">            if (this.min == -1 || this.min &gt; count + 1) &#123;</div><div class="line">                this.min = count + 1;</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = index; i &gt;= 0; i--) &#123;</div><div class="line">            int maxNum = amount / coins[i];</div><div class="line">            for (int j = maxNum; j &gt; 0; j--) &#123;</div><div class="line">                this.helper(coins, amount - coins[i] * j, i - 1, count + maxNum);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>problem</strong></p>
<p>miss the situation when amount is 0…</p>
<p><strong>reason</strong></p>
<hr>
<p><strong>modification</strong></p>
<p>add this case</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">public class Solution &#123;</div><div class="line"></div><div class="line">    int min;</div><div class="line"></div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        Arrays.sort(coins);</div><div class="line">        this.min = -1;</div><div class="line">        if (amount == 0) &#123;</div><div class="line">            return 0;</div><div class="line">        &#125;</div><div class="line">        if (coins.length &gt; 0) &#123;</div><div class="line">            this.helper(coins, amount, coins.length - 1, 0);</div><div class="line">        &#125;</div><div class="line">        return this.min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void helper(int[] coins, int amount, int index, int count) &#123;</div><div class="line">        if (index &lt; 0) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if (amount == coins[index]) &#123;</div><div class="line">            if (this.min == -1 || this.min &gt; count + 1) &#123;</div><div class="line">                this.min = count + 1;</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = index; i &gt;= 0; i--) &#123;</div><div class="line">            int maxNum = amount / coins[i];</div><div class="line">            for (int j = maxNum; j &gt; 0; j--) &#123;</div><div class="line">                this.helper(coins, amount - coins[i] * j, i - 1, count + maxNum);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>problem</strong></p>
<p>wrong answer</p>
<p><strong>reason</strong></p>
<ul>
<li>actually the first problem has already reveal the problem.The base case in the recursion is totally wrong.It should be the one which we make the amount is 0.And there’s also no need to add a individual case.</li>
<li>and there’s another stupid mistake: <code>count + maxNum</code>. It should be <code>count + j</code></li>
</ul>
<hr>
<p><strong>modification</strong></p>
<p>change the base case into amount == 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">public class Solution &#123;</div><div class="line"></div><div class="line">    int min;</div><div class="line"></div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        Arrays.sort(coins);</div><div class="line">        this.min = -1;</div><div class="line">        if (coins.length &gt; 0) &#123;</div><div class="line">            this.helper(coins, amount, coins.length - 1, 0);</div><div class="line">        &#125;</div><div class="line">        return this.min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void helper(int[] coins, int amount, int index, int count) &#123;</div><div class="line">        if (amount == 0) &#123;</div><div class="line">            if (this.min == -1 || this.min &gt; count) &#123;</div><div class="line">                this.min = count;</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if (index &lt; 0) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = index; i &gt;= 0; i--) &#123;</div><div class="line">            int maxNum = amount / coins[i];</div><div class="line">            for (int j = maxNum; j &gt; 0; j--) &#123;</div><div class="line">                this.helper(coins, amount - coins[i] * j, i - 1, count + j);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>problem</strong></p>
<p>TLE</p>
<p><strong>modification</strong></p>
<p>tried to skip some unnecessary loop, but it didn’t work.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">public class Solution &#123;</div><div class="line"></div><div class="line">    int min;</div><div class="line"></div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        Arrays.sort(coins);</div><div class="line">        this.min = -1;</div><div class="line">        if (coins.length &gt; 0) &#123;</div><div class="line">            this.helper(coins, amount, coins.length - 1, 0);</div><div class="line">        &#125;</div><div class="line">        return this.min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void helper(int[] coins, int amount, int index, int count) &#123;</div><div class="line">        if (amount == 0) &#123;</div><div class="line">            if (this.min == -1 || this.min &gt; count) &#123;</div><div class="line">                this.min = count;</div><div class="line">            &#125;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if (index &lt; 0) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        for (int i = index; i &gt;= 0; i--) &#123;</div><div class="line">            int maxNum = amount / coins[i];</div><div class="line">            if (this.min != -1 &amp;&amp; maxNum &gt; this.min) &#123;</div><div class="line">                return;</div><div class="line">            &#125;</div><div class="line">            for (int j = maxNum; j &gt; 0; j--) &#123;</div><div class="line">                this.helper(coins, amount - coins[i] * j, i - 1, count + j);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="this-can-be-solved-using-DP-Update-later"><a href="#this-can-be-solved-using-DP-Update-later" class="headerlink" title="this can be solved using DP. Update later."></a>this can be solved using DP. Update later.</h3><hr>
<h3 id="DP-solution"><a href="#DP-solution" class="headerlink" title="DP solution"></a>DP solution</h3><h4 id="first-thought-1"><a href="#first-thought-1" class="headerlink" title="first thought"></a>first thought</h4><ul>
<li>similar with the 0-1 knapsack, build the 2d array to represent the count of two factors: current coin and sum.</li>
<li>each point at the matrix represent the minimum count at this coin.</li>
<li>iterate the current coin for k times, which k is the number of current coin. And save the minimum count for the current coin.</li>
<li>iterate to the end, which is have chosen all the coins and the sum is amount.</li>
</ul>
<p><strong>solution</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        int n = coins.length;</div><div class="line">        int[][] minCount = new int[n + 1][amount + 1];</div><div class="line">        for (int i = 0; i &lt;= amount; i++) &#123;</div><div class="line">            minCount[0][i] = Integer.MAX_VALUE;</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt;= n; i++) &#123;</div><div class="line">            minCount[i][0] = 0;</div><div class="line">        &#125;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            for (int j = 1; j &lt;= amount; j++) &#123;</div><div class="line">                int count = Integer.MAX_VALUE;</div><div class="line">                for (int k = 0; k &lt;= j / coins[i - 1]; k++) &#123;</div><div class="line">                    if (minCount[i - 1][j - k * coins[i - 1]] &lt; Integer.MAX_VALUE) &#123;</div><div class="line">                        count = Math.min(minCount[i - 1][j - k * coins[i - 1]] + k, count);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                minCount[i][j] = count;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return minCount[n][amount] == Integer.MAX_VALUE ? -1 : minCount[n][amount];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>problem</strong></p>
<p>TLE at the last case…</p>
<p><strong>promote</strong></p>
<p>The solution is right, but it can also make some pruning. There’re some situations that can be optimized.</p>
<ul>
<li>In initializing the matrix, there’s no necessary using n+1 rows.</li>
<li>If the amount is smaller than the current coin. There’s no necessary to calculate.</li>
</ul>
<hr>
<p><strong>modification</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public int coinChange(int[] coins, int amount) &#123;</div><div class="line">        int n = coins.length;</div><div class="line">        int[][] minCount = new int[n][amount + 1];</div><div class="line">        for (int i = 0; i &lt;= amount; i++) &#123;</div><div class="line">            if (i % coins[0] == 0) &#123;</div><div class="line">                minCount[0][i] = i / coins[0];</div><div class="line">            &#125; else &#123;</div><div class="line">                minCount[0][i] = Integer.MAX_VALUE;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        for (int i = 1; i &lt; n; i++) &#123;</div><div class="line">            for (int j = 1; j &lt;= amount; j++) &#123;</div><div class="line">                if (j &lt; coins[i]) &#123;</div><div class="line">                    minCount[i][j] = minCount[i - 1][j];</div><div class="line">                    continue;</div><div class="line">                &#125;</div><div class="line">                int count = Integer.MAX_VALUE;</div><div class="line">                for (int k = 0; k &lt;= j / coins[i]; k++) &#123;</div><div class="line">                    if (minCount[i - 1][j - k * coins[i]] &lt; Integer.MAX_VALUE) &#123;</div><div class="line">                        count = Math.min(minCount[i - 1][j - k * coins[i]] + k, count);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                minCount[i][j] = count;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return minCount[n - 1][amount] == Integer.MAX_VALUE ? -1 : minCount[n - 1][amount];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-08-14</span><i class="fa fa-comment-o"></i><a href="/posts/322-Coin-Change/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/categories/算法/" title="算法">算法 </a><a class="tag" href="/tags/算法/" title="算法">算法 </a><a class="tag" href="/tags/algorithm/" title="algorithm">algorithm </a><a class="tag" href="/tags/DP/" title="DP">DP </a><a class="tag" href="/tags/动态规划/" title="动态规划">动态规划 </a><a class="tag" href="/tags/Dynamic-Programming/" title="Dynamic Programming">Dynamic Programming </a><a class="tag" href="/tags/LeetCode/" title="LeetCode">LeetCode </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://yhvh009.github.io/posts/322-Coin-Change/,阳光夜风,LeetCode &quot;322. Coin Change&quot;,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/posts/113-Path-Sum-II/" title="LeetCode &quot;113. Path Sum II&quot;">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/posts/472-Concatenated-Words/" title="LeetCode 472. Concatenated Words">下一篇</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'yhvh009-github-io';
var disqus_identifier = 'posts/322-Coin-Change/';
var disqus_title = 'LeetCode &quot;322. Coin Change&quot;';
var disqus_url = 'https://yhvh009.github.io/posts/322-Coin-Change/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>