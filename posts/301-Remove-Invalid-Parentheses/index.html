<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="阳光夜风"><title>LeetCode "301. Remove Invalid Parentheses" · 阳光夜风</title><!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="description" content="LeetCode link
first thought
have no idea…
it can be also solved by dfs, but I think bfs cost less, so just use bfs.
Have seen the answer. Because the "><meta name="keywords" content="iOS, Apple Foundation, Machine Learning, Algorithm, LeetCode"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">阳光夜风</a></h3><div class="description"><p>上善若水 大盈若冲</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/1685261185"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/categories/">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>LeetCode &quot;301. Remove Invalid Parentheses&quot;</a></h3></div><div class="post-content"><p><a href="https://leetcode.com/problems/remove-invalid-parentheses/description/" target="_blank" rel="external">LeetCode link</a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h3 id="first-thought"><a href="#first-thought" class="headerlink" title="first thought"></a>first thought</h3><ul>
<li>have no idea…</li>
<li>it can be also solved by dfs, but I think bfs cost less, so just use bfs.</li>
<li>Have seen the answer. Because the problem is to delete minimum count of chars, so the root is the whole string, the neighbors is all the strings that deleted by one char.</li>
</ul>
<p><strong>solution</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public List&lt;String&gt; removeInvalidParentheses(String s) &#123;</div><div class="line">        if (s == null) &#123;</div><div class="line">            return new ArrayList&lt;&gt;();</div><div class="line">        &#125;</div><div class="line">        if (s.length() &lt; 1) &#123;</div><div class="line">            List&lt;String&gt; empty = new ArrayList&lt;&gt;();</div><div class="line">            empty.add(&quot;&quot;);</div><div class="line">            return empty;</div><div class="line">        &#125;</div><div class="line">        Set&lt;String&gt; visited = new HashSet&lt;&gt;();</div><div class="line">        List&lt;String&gt; result = new ArrayList&lt;&gt;();</div><div class="line">        Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();</div><div class="line">        queue.add(s);</div><div class="line">        boolean hasValid = false;</div><div class="line">        while (!queue.isEmpty()) &#123;</div><div class="line">            String str = queue.poll();</div><div class="line">            if (this.isValid(str)) &#123;</div><div class="line">                result.add(str);</div><div class="line">                hasValid = true;</div><div class="line">            &#125; else if (!hasValid) &#123;</div><div class="line">                for (int i = 0; i &lt; str.length(); i++) &#123;</div><div class="line">                    String sub1 = str.substring(0, i);</div><div class="line">                    String sub2 = str.substring(i + 1, str.length());</div><div class="line">                    String newStr = sub1.concat(sub2);</div><div class="line">                    if (!visited.contains(newStr)) &#123;</div><div class="line">                        queue.add(newStr);</div><div class="line">                        visited.add(newStr);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isValid(String s) &#123;</div><div class="line">        char[] chars = s.toCharArray();</div><div class="line">        int count = 0;</div><div class="line">        for (char c: chars) &#123;</div><div class="line">            if (c == &apos;(&apos;) &#123;</div><div class="line">                count++;</div><div class="line">            &#125; else if (c == &apos;)&apos;) &#123;</div><div class="line">                if (count == 0) &#123;</div><div class="line">                    return false;</div><div class="line">                &#125; else &#123;</div><div class="line">                    count--;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return count == 0;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>problem</strong></p>
<p>wrong answer, there’s a empty string in the result.</p>
<p>Input:<br>“x(“<br>Output:<br>[“x”,””]<br>Expected:<br>[“x”]</p>
<p><strong>reason</strong></p>
<p>although have checked hasValid, but it still can be some smaller strings were added into the queue. (e.g first string is not valid, it’s children are added, the second string is valid, the rest substring will not be added. But the substring of the first one has already be added, so there would be some shorter but valid results.</p>
<hr>
<p><strong>modification</strong></p>
<p>avoid the shorter cases.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public List&lt;String&gt; removeInvalidParentheses(String s) &#123;</div><div class="line">        if (s == null) &#123;</div><div class="line">            return new ArrayList&lt;&gt;();</div><div class="line">        &#125;</div><div class="line">        if (s.length() &lt; 1) &#123;</div><div class="line">            List&lt;String&gt; empty = new ArrayList&lt;&gt;();</div><div class="line">            empty.add(&quot;&quot;);</div><div class="line">            return empty;</div><div class="line">        &#125;</div><div class="line">        Set&lt;String&gt; visited = new HashSet&lt;&gt;();</div><div class="line">        List&lt;String&gt; result = new ArrayList&lt;&gt;();</div><div class="line">        Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();</div><div class="line">        queue.add(s);</div><div class="line">        boolean hasValid = false;</div><div class="line">        while (!queue.isEmpty()) &#123;</div><div class="line">            Queue&lt;String&gt; queue2 = new LinkedList&lt;&gt;();</div><div class="line">            while (!queue.isEmpty()) &#123;</div><div class="line">                String str = queue.poll();</div><div class="line">                if (this.isValid(str)) &#123;</div><div class="line">                    result.add(str);</div><div class="line">                    hasValid = true;</div><div class="line">                    queue2.clear();</div><div class="line">                &#125; else if (!hasValid) &#123;</div><div class="line">                    for (int i = 0; i &lt; str.length(); i++) &#123;</div><div class="line">                        String sub1 = str.substring(0, i);</div><div class="line">                        String sub2 = str.substring(i + 1, str.length());</div><div class="line">                        String newStr = sub1.concat(sub2);</div><div class="line">                        if (!visited.contains(newStr)) &#123;</div><div class="line">                            queue2.add(newStr);</div><div class="line">                            visited.add(newStr);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            queue = queue2;</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private boolean isValid(String s) &#123;</div><div class="line">        char[] chars = s.toCharArray();</div><div class="line">        int count = 0;</div><div class="line">        for (char c: chars) &#123;</div><div class="line">            if (c == &apos;(&apos;) &#123;</div><div class="line">                count++;</div><div class="line">            &#125; else if (c == &apos;)&apos;) &#123;</div><div class="line">                if (count == 0) &#123;</div><div class="line">                    return false;</div><div class="line">                &#125; else &#123;</div><div class="line">                    count--;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return count == 0;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-08-18</span><i class="fa fa-comment-o"></i><a href="/posts/301-Remove-Invalid-Parentheses/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/categories/算法/" title="算法">算法 </a><a class="tag" href="/tags/算法/" title="算法">算法 </a><a class="tag" href="/tags/algorithm/" title="algorithm">algorithm </a><a class="tag" href="/tags/LeetCode/" title="LeetCode">LeetCode </a><a class="tag" href="/tags/BFS/" title="BFS">BFS </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/posts/301-Remove-Invalid-Parentheses/,阳光夜风,LeetCode &quot;301. Remove Invalid Parentheses&quot;,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/posts/515-Find-Largest-Value-in-Each-Tree-Row/" title="LeetCode &quot;515. Find Largest Value in Each Tree Row&quot;">下一篇</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'yhvh009-github-io';
var disqus_identifier = 'posts/301-Remove-Invalid-Parentheses/';
var disqus_title = 'LeetCode &quot;301. Remove Invalid Parentheses&quot;';
var disqus_url = 'http://yoursite.com/posts/301-Remove-Invalid-Parentheses/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>